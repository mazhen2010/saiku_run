var Saiku={toolbar:{},tabs:new TabSet,splash:new SplashScreen({toolbar:this.toolbar}),session:null,events:_.extend({},Backbone.Events),routers:[],leaflet:"undefined"!==typeof L?L:{},ui:{block:function(a){$(".processing_message").html(a);$(".processing_message").removeClass("i18n_translated").addClass("i18n");Saiku.i18n.translate();$(".processing,.processing_container").show()},unblock:function(){$(".processing,.processing_container, .blockOverlay").hide();$(".blockUI").fadeOut("slow")}},log:function(a,
c){console&&console.log&&(console.log("Logging for: "+a),c&&console.log(c))},error:function(a,c){console&&console.error&&(console.error("Logging for: "+a),console.error(c))},URLParams:{buildValue:function(a){return/^\s*$/.test(a)?null:/^(true|false)$/i.test(a)?"true"===a.toLowerCase():isFinite(a)?parseFloat(a):a},paramsURI:function(){var a={},c=window.location.search.substr(1).split("\x26"),b=c.length,d,e;if(1<window.location.search.length)for(d=0;d<b;d++)e=c[d].split("\x3d"),a[decodeURIComponent(e[0])]=
1<e.length?this.buildValue(decodeURIComponent(e[1])):null;return a},equals:function(){var a=Array.prototype.slice.call(arguments),c=this.paramsURI();return _.isEqual(c,a[0])?!0:!1}},loadCSS:function(a,c){var b=window.document.createElement("link"),d=window.document.getElementsByTagName("script")[0];b.rel="stylesheet";b.href=a;b.media="only x";d.parentNode.insertBefore(b,d);setTimeout(function(){b.media=c||"all"});return b},loadJS:function(a,c){var b=window.document.createElement("script"),d=window.document.getElementsByTagName("script")[0];
b.src=a;b.async=!0;d.parentNode.insertBefore(b,d);c&&"function"===typeof c&&(b.onload=c);return b},toPattern:function(a,c){var b=("object"===typeof c?c.pattern:c).split(""),d=a.toString().replace(/[^0-9a-zA-Z]/g,""),e=0,g=b.length,f;for(f=0;f<g&&!(e>=d.length);f++)if("9"===b[f]&&d[e].match(/[0-9]/)||"A"===b[f]&&d[e].match(/[a-zA-Z]/)||"S"===b[f]&&d[e].match(/[0-9a-zA-Z]/))b[f]=d[e++];else if("9"===b[f]||"A"===b[f]||"S"===b[f])b=b.slice(0,f);return b.join("").substr(0,f)},replaceString:function(a,
c,b){for(var d=b.length,e=0;e<d;e++)b.substring(e,e+a.length)===a&&(b=b.substring(0,e)+c+b.substring(e+a.length,b.length));return b}};Saiku.singleton=function(){var a;Saiku.singleton=function(){if(a)return a;a=this;this.set=function(a){this.data=a};this.get=function(){return this.data}};return Saiku.singleton}();Backbone.emulateHTTP=!1;
Settings.BIPLUGIN||$(document).ready(function(){var a=new PluginCollection;a.fetch({success:function(){var c=new SettingsOverrideCollection;c.fetch({success:function(){var b=a.size(),d=0;a.each(function(a){d+=1;if("js/saiku/plugins/I18n/plugin.js"!=a.attributes.path)jQuery.ajax({async:!1,type:"GET",url:a.attributes.path,data:null,success:function(){if(d==b){var a=c.size(),e=0;c.each(function(b){e+=1;for(var c in b.attributes)Settings[c]=b.attributes[c];void 0!=Settings.CSS&&Saiku.loadCSS(Settings.CSS,
null);a==e&&(Saiku.session=new Session({},{username:Settings.USERNAME,password:Settings.PASSWORD}),Saiku.toolbar=new Toolbar)})}},dataType:"script"});else if(d==b){var g=c.size(),f=0;c.each(function(a){f+=1;for(var b in a.attributes)Settings[b]=a.attributes[b];void 0!=Settings.CSS&&Saiku.loadCSS(Settings.CSS,null);g==f&&(Saiku.session=new Session({},{username:Settings.USERNAME,password:Settings.PASSWORD}),Saiku.toolbar=new Toolbar)})}})},error:function(){var b=a.size(),c=0;a.each(function(a){c+=1;
"js/saiku/plugins/I18n/plugin.js"!=a.attributes.path?jQuery.ajax({async:!1,type:"GET",url:a.attributes.path,data:null,success:function(){c==b&&(void 0!=Settings.CSS&&Saiku.loadCSS(Settings.CSS,null),Saiku.session=new Session({},{username:Settings.USERNAME,password:Settings.PASSWORD}),Saiku.toolbar=new Toolbar)},dataType:"script"}):c==b&&(void 0!=Settings.CSS&&Saiku.loadCSS(Settings.CSS,null),Saiku.session=new Session({},{username:Settings.USERNAME,password:Settings.PASSWORD}),Saiku.toolbar=new Toolbar)})}})}})});
var SaikuTimeLogger=function(a){this._element=$(a);this._timestamps=[];this._events=[]};SaikuTimeLogger.prototype.log=function(a){var c=(new Date).getTime();a||(a="Unknown");if(0<this._timestamps.length){var b=this._timestamps[this._timestamps.length-1];1<c-b&&this._element.append("\x3cdiv\x3e"+(c-b)+" ms "+a+"  (previous: "+this._events[this._events.length-1]+" )\x3c/div\x3e")}this._timestamps.push(c);this._events.push(a)};